@using MyGameShelf.Web.ViewModels
@model UserReviewsTabViewModel

<script>
    const userId = '@Model.UserId';
</script>

<div class="container">
    @foreach (var review in Model.Reviews)
    {
        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="row g-0">
                        <!-- Left Column: Game Image -->
                        <div class="col-3">
                            <img src="@review.GameImageUrl"
                                 class="img-fluid rounded-start h-100 w-100"
                                 style="object-fit: cover;"
                                 alt="@review.GameTitle" />
                        </div>

                        <!-- Right Column: Details -->
                        <div class="col-9 d-flex flex-column p-3">
                            <!-- First Row: Game Title and Recommend icon -->
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <h5 class="mb-0">@review.GameTitle</h5>
                                @if (review.IsRecommended.HasValue)
                                {
                                    <span class="badge @(review.IsRecommended.Value ? "bg-success" : "bg-danger")">
                                        @(review.IsRecommended.Value ? "Recommends 👍" : "Not Recommended 👎")
                                    </span>
                                }
                            </div>

                            <!-- Second Row: Review Content -->
                            <div class="mb-3">
                                <p class="mb-0">@review.Content</p>
                            </div>

                            <!-- Third Row: Edit Button -->
                            <div class="d-flex justify-content-end gap-1">
                                <a href="@Url.Action("Details", "Games", new { id = review.GameId })" class="btn btn-sm btn-primary">
                                    View Details
                                </a>

                                @if (Model.IsOwner)
                                {
                                    <form asp-action="DeleteReview" asp-controller="Reviews" method="post" onsubmit="return confirm('Are you sure you want to delete this review?');">
                                        <input type="hidden" name="id" value="@review.ReviewId" />
                                        <button type="submit" class="btn btn-sm btn-danger">Delete</button>
                                    </form>
                                }

                            </div>

                            

                        </div>
                    </div>
                </div>
            </div>
        </div>
    }
</div>




